# 轻约·可信社交产品文档

## 📋 项目概述

**产品定位:** 轻约是一个基于信任机制的 Flutter 跨平台社交应用，专注于真实、安全的线下活动组织与参与。通过多重信任验证机制，构建可信任的社交环境。

**核心价值主张:**

*   **可信社交:** 通过实名认证、信用评分、动态安全码等机制确保用户真实性。
*   **安全保障:** 多层次安全防护，包括紧急求助、位置追踪、风险预警。
*   **高效匹配:** 基于兴趣、信用分、地理位置的智能活动推荐。
*   **社交激励:** 通过信用积分、成就系统、社交证明促进用户参与。

**目标用户:**

*   **活动组织者**（25-40岁）：有组织活动需求的社交达人，希望找到可靠参与者，追求高质量社交体验。
*   **活动参与者**（20-35岁）：寻求真实社交机会的年轻人，希望扩展社交圈的职场人士，追求安全可靠活动的谨慎用户。

## 🏗️ 产品架构

### 核心功能模块 (基于需求分析，调整为 Flutter+Firebase 实现)

1.  **用户认证与信任体系:**
    *   **实名认证:** 集成第三方实名认证服务，验证用户身份。
    *   **信用评分:** 基于用户行为（活动参与、评价、投诉等）在 Firestore 中建立动态信用评分体系。
    *   **认证等级:** 根据信用评分和认证情况，在用户资料中展示不同的认证等级（基础、认证、金标）。
    *   **社交证明:** 在用户资料页展示活动历史、用户评价和信用记录，数据存储在 Firestore。
    *   **Firebase Authentication:** 用于用户的邮箱/密码、以及未来可能的第三方（如微信）登录管理。

2.  **活动管理系统:**
    *   **活动发布:** 提供丰富的活动类型和模板，用户填写活动信息（标题、时间、地点、费用、人数限制、要求等），数据存储在 Firestore 的活动集合中。
    *   **智能推荐:** 后期实现基于用户兴趣标签、信用分和地理位置（需集成地图服务）的活动推荐算法。
    *   **报名管理:** 用户报名活动，报名信息存储在 Firestore 的报名集合中，组织者可在应用内查看和管理报名列表。
    *   **活动执行:** 活动签到（可能结合安全码或地理位置），活动内互动（聊天室，后期），活动结束后的评价。数据存储在 Firestore。

3.  **安全保障系统:**
    *   **动态安全码:** 为每次活动生成动态安全码，组织者和参与者在活动前或签到时验证，逻辑可在客户端实现或通过 Cloud Functions。
    *   **紧急求助:** 提供一键触发紧急求助功能，通知紧急联系人（用户自行设置，存储在 Firestore）并记录位置（需集成位置服务），可能通过 Cloud Functions 发送通知。
    *   **位置追踪:** 活动期间（用户授权后）的位置信息记录和查看功能，数据存储在 Firestore 或其他地理位置服务。
    *   **风险预警:** 后期实现基于用户行为和历史数据的风险评估和预警机制，可能通过 Cloud Functions 和机器学习模型实现。

4.  **社交互动系统:**
    *   **消息中心:** 活动相关的私聊或群聊功能，可以使用 Firebase Cloud Messaging (FCM) 进行消息推送，聊天数据存储在 Firestore 或单独的聊天服务。
    *   **评价系统:** 活动结束后，组织者和参与者可以双向评价，评价数据存储在 Firestore，并影响信用评分。
    *   **社交分享:** 分享活动信息到其他平台的功能。
    *   **社区建设:** 后期考虑兴趣小组、话题讨论等功能，数据存储在 Firestore。

## 📱 UI/UE 设计

**核心用户流程:**

1.  **新用户引导:** 启动 → 微信登录/邮箱注册 → (实名认证 - 后期) → (完善资料 - 后期) → 进入主页。
2.  **活动参与:** 浏览活动列表 → 查看活动详情 → (评估匹配度 - 后期智能) → 报名 → (获取安全码) → 参与活动 → 评价。
3.  **活动创建:** (选择模板 - 后期) → 填写活动信息 → (设置参与条件 - 后期) → 发布 → 管理报名者 → 活动执行 → 评价。

**界面设计原则:**

*   **视觉设计:** 温暖的橙色主色调，清晰的字体层级，统一的图标设计。遵循 Material Design 3 原则，使用 `ColorScheme.fromSeed`。
*   **交互设计:** 微动效提升反馈，符合用户习惯的手势操作，及时的状态反馈。
*   **信息架构:** 渐进式披露信息，智能分类和个性化内容组织（后期），常用功能的便捷访问。

**页面列表 (MVP 阶段重点页面):**

*   启动页/引导页
*   登录页 (邮箱/密码输入)
*   注册页 (邮箱/密码输入)
*   (实名认证页 - 占位符，MVP阶段可能不实现实际认证)
*   主页 (活动列表展示)
*   活动详情页
*   活动报名页
*   我的页面 (基础用户资料展示)
*   (安全码展示页)

**页面列表 (后续阶段):**

*   活动发布页 (详细表单)
*   报名管理页 (组织者视角)
*   用户资料页 (详细信息、信用、活动历史)
*   消息列表页
*   聊天详情页
*   评价页面
*   设置页面 (紧急联系人设置等)
*   （更多根据需求扩展的页面）

## 🔧 技术架构

**技术选型:**

*   **前端:** Flutter (Dart)
*   **后端:** Firebase (Authentication, Firestore, Cloud Storage, Cloud Functions)
*   **实名认证:** 第三方服务 (待选型，需支持 Flutter 集成)
*   **地图服务:** `google_maps_flutter` 或其他地图插件 (后期)
*   **消息推送:** Firebase Cloud Messaging (FCM) (后期)

**核心技术特性:**

*   **跨平台:** 一套代码运行在 iOS 和 Android 平台。
*   **Firebase 集成:** 利用 Firebase 的 Authentication 进行用户管理，Firestore 存储结构化数据，Cloud Storage 存储图片等文件，Cloud Functions 处理后端逻辑。
*   **实时数据同步:** Firestore 提供实时数据监听，方便构建实时更新的 UI。
*   **安全加密:** Firebase 提供了数据传输和存储的安全保障。
*   **性能优化:** 利用 Flutter 的性能优势，结合 Firebase 的优化策略。

## 📊 商业模式

**盈利模式:**

1.  **增值服务:** 高级认证、活动优先推荐、专属客服等付费功能。
2.  **广告收入:** 精准的活动推广广告，与品牌合作。
3.  **平台佣金:** 对部分付费活动收取平台服务费。
4.  **数据服务:** 匿名化的用户行为数据分析报告。

**运营策略:**

1.  **冷启动:** 招募种子用户，邀请优质活动组织者和参与者，生产高质量活动内容。
2.  **增长策略:** 社交分享裂变，邀请好友奖励，良好的口碑传播。
3.  **留存策略:** 完善信用体系，鼓励用户建立社交关系，通过活动推荐形成使用习惯，定期举办线上线下活动。
4.  **变现策略:** 在用户规模和活跃度达到一定程度后，逐步引入增值服务和广告。

## ✨ 当前项目状态

*   已创建基础 Flutter 项目结构。
*   已集成 Firebase Core, Authentication, 和 Firestore 依赖。
*   已完成 Firebase 初始化配置。
*   已设置应用根据用户的 Firebase 认证状态进行页面跳转（到登录页或基础主页）。
*   已创建基础的登录页面和注册页面（占位符 UI）。

## 📝 待开发需求

**MVP 阶段 (版本 1.0) - 核心可信社交功能:**

*   **用户认证与信任:**
    *   完成邮箱和密码的注册登录 UI 和逻辑 (连接 Firebase Authentication)。
    *   实现用户登出功能。
    *   (实名认证 UI 占位符)。
    *   (用户资料基础完善和展示，关联 Firebase 用户 ID 和 Firestore 用户文档)。
*   **活动管理:**
    *   设计和实现活动发布的基础 UI (标题、描述、时间、地点)。
    *   将活动数据存储到 Firestore 的活动集合中。
    *   实现活动列表页，从 Firestore 读取活动数据并展示。
    *   实现活动详情页，展示活动详细信息。
    *   实现活动报名功能，将报名信息存储到 Firestore 的报名集合中。
*   **安全保障:**
    *   实现动态安全码的生成和在活动详情/报名成功页面的展示。
*   **社交互动:**
    *   (基础消息功能 - MVP可能不包含完整的聊天，先预留入口)

**后续阶段 (版本 1.x - 功能完善):**

*   完善用户资料管理 (头像、昵称、兴趣标签)。
*   集成第三方实名认证服务。
*   实现用户信用评分的初步计算和展示。
*   完善活动发布功能 (更多字段、图片上传 - Cloud Storage)。
*   实现活动报名列表管理 (组织者)。
*   集成地图服务，支持活动地点选择和展示。
*   实现活动签到功能 (基于安全码或地理位置)。
*   实现双向评价系统。
*   实现应用内消息（聊天）功能 (Firestore 或其他方案 + FCM)。
*   实现紧急求助功能 (设置紧急联系人)。

**后续阶段 (版本 2.0+ - 规模扩张与生态建设):**

*   智能活动推荐算法优化。
*   风险预警系统。
*   位置追踪功能优化。
*   社区功能 (兴趣小组、话题讨论)。
*   增值服务和广告功能的开发。
*   数据分析和后台管理系统。
*   开放平台和第三方集成。

## 📚 Initial Data Model Design (Firestore)

以下是 MVP 阶段 Firestore 数据模型的初步设想：

*   **`users` 集合:**
    *   每个文档代表一个用户，文档ID为 Firebase Authentication 的 User UID。
    *   字段:
        *   `email` (String)
        *   `displayName` (String, 用户昵称，可编辑)
        *   `photoUrl` (String, 用户头像 URL, 可选)
        *   `createdAt` (Timestamp)
        *   `isVerified` (bool, 是否完成实名认证，MVP阶段可先设为 false)
        *   `creditScore` (int, 信用评分，MVP阶段可先设默认值)
        *   `emergencyContacts` (Array of Map/String, 紧急联系人列表，后期实现)
        *   `interests` (Array of String, 用户兴趣标签，后期实现)
*   **`activities` 集合:**
    *   每个文档代表一个活动，文档ID由 Firestore 自动生成。
    *   字段:
        *   `title` (String, 活动标题)
        *   `description` (String, 活动描述)
        *   `type` (String, 活动类型)
        *   `organizerId` (String, 组织者用户 UID)
        *   `startTime` (Timestamp)
        *   `endTime` (Timestamp)
        *   `location` (String, 地点描述)
        *   `locationGeo` (GeoPoint, 地理位置坐标，后期集成地图后使用)
        *   `cost` (double, 活动费用)
        *   `maxParticipants` (int, 最大参与人数)
        *   `currentParticipants` (int, 当前已报名人数)
        *   `createdAt` (Timestamp)
        *   `status` (String, 活动状态: open, closed, completed, cancelled)
        *   `imageUrl` (String, 活动封面图 URL, 可选)
        *   `requirements` (Array of String, 参与者要求，后期实现)
*   **`signups` 集合:**
    *   每个文档代表一个用户的活动报名，文档ID由 Firestore 自动生成。
    *   字段:
        *   `activityId` (String, 关联的活动 ID)
        *   `userId` (String, 报名的用户 UID)
        *   `signupTime` (Timestamp)
        *   `status` (String, 报名状态: pending, approved, rejected)
        *   `securityCode` (String, 动态安全码)

**注意:** 这是一个初步的数据模型设计，后续会根据实际需求和功能扩展进行调整和优化。例如，评价、消息、风险预警等功能需要新增相应的集合或字段。

## 📅 版本迭代计划

**版本 1.0 (MVP) - 核心可信社交框架构建 (预计 1-2 个月)**

*   **目标:** 实现用户基础认证、活动的基本发布和参与、以及动态安全码功能，验证产品核心流程的可行性。
*   **核心功能:**
    *   **用户认证:**
        *   邮箱/密码注册、登录、登出。
        *   根据登录状态进行页面跳转。
        *   基础用户资料页面 (显示邮箱/UID)。
    *   **活动管理:**
        *   活动发布页面 (基础字段)。
        *   活动列表页面 (基础展示)。
        *   活动详情页面。
        *   活动报名功能。
    *   **安全保障:**
        *   动态安全码生成和展示。
*   **UI/页面:**
    *   登录页、注册页、主页、活动详情页、活动报名页、我的页面 (基础版)。
*   **技术要点:**
    *   利用 Firebase Authentication 实现用户注册登录。
    *   设计 Firestore 数据模型 (`users`, `activities`, `signups`)。
    *   使用 Firestore 读写数据实现活动和报名功能。
    *   动态安全码生成逻辑实现。
*   **预计时间:** 1-2 个月 (取决于开发资源投入和具体实现复杂度)。

**版本 1.x (功能完善) - 提升信任与用户体验 (预计 2-4 个月)**

*   **目标:** 完善用户资料和信任体系，增加更多活动管理功能，提升用户体验。
*   **核心功能:**
    *   完善用户资料管理 (昵称、头像、兴趣)。
    *   集成实名认证。
    *   初步的信用评分计算和展示。
    *   完善活动发布 (图片上传、更多限制条件)。
    *   组织者管理报名列表。
    *   活动签到功能。
    *   双向评价系统。
    *   基础的消息（聊天）功能。
    *   紧急联系人设置。
*   **技术要点:**
    *   集成第三方实名认证 SDK/API。
    *   实现信用评分逻辑 (可能需要 Cloud Functions)。
    *   使用 Firebase Cloud Storage 处理图片上传。
    *   设计和实现聊天数据模型。
    *   利用 FCM 实现消息推送。
*   **预计时间:** 2-4 个月。

**版本 2.0+ (规模扩张与生态建设) - 智能化与平台化 (时间待定)**

*   **目标:** 扩大用户规模，探索更多盈利模式，构建社交生态。
*   **核心功能:**
    *   智能活动推荐算法。
    *   风险预警系统。
    *   集成地图服务 (地点选择、导航、位置追踪)。
    *   社区功能扩展 (小组、话题)。
    *   增值服务和广告模块。
    *   数据分析和后台管理系统。
    *   开放平台 API。
*   **技术要点:**
    *   机器学习模型 (风险预警、推荐)。
    *   地理位置服务集成。
    *   后端系统和 API 设计。
*   **预计时间:** 根据市场反馈和资源投入情况决定。

---

请注意，上述文档和计划是基于你提供的需求和当前的开发进度制定的。在实际开发过程中，可能会遇到各种 unforeseen challenges 或需求变化，需要我们灵活调整计划。

现在，你可以查阅根目录下“项目文档”文件夹中的这份文档，并根据版本迭代计划，我们就可以一步步地开始具体的代码实现了。