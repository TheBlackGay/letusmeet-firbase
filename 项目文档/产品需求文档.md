# 轻约·可信社交产品需求文档 (PRD)

## 1. 引言

### 1.1 项目背景

当前社交平台鱼龙混杂，用户在线下社交中面临着信任缺失、信息不对称和安全担忧等诸多痛点。轻约旨在构建一个基于多重信任验证机制的微信小程序社交平台，专注于提供真实、安全的线下活动组织与参与体验，解决用户在传统社交模式下的核心困境。

### 1.2 项目目标

*   建立一个高度可信的线下社交环境。
*   提供安全可靠的活动组织和参与平台。
*   提升用户社交匹配效率和体验。
*   通过激励机制促进用户积极参与和社区建设。

### 1.3 项目范围

本项目基于 Flutter 开发，后端采用 Firebase。首期（MVP）聚焦于核心用户认证、基本活动管理和动态安全码功能，后续版本逐步完善信用体系、全面安全保障、智能匹配和社交互动功能。

## 2. 目标用户

### 2.1 主要用户群体

1.  **活动组织者:**
    *   **画像:** 25-40岁，热衷于组织各类线下活动，希望找到志同道合且可靠的参与者，注重活动质量和参与者素质。
    *   **需求:** 方便快捷的活动发布和管理工具，有效的参与者筛选机制，提升活动成功率和体验。
    *   **痛点:** 难以判断报名者真实性，担心活动安全和组织风险。

2.  **活动参与者:**
    *   **画像:** 20-35岁，希望通过线下活动扩展社交圈，寻求真实、有趣的社交机会，对自身安全和活动可靠性有较高要求。
    *   **需求:** 发现感兴趣且可靠的活动，了解活动组织者和参与者的信息，获得安全保障。
    *   **痛点:** 担心遇到虚假信息、不安全的环境或不可靠的人。

## 3. 核心价值

轻约的核心价值在于通过建立一套完善的信任体系和安全保障机制，为用户提供一个**可信、安全、高效**的线下社交平台，让用户能够安心地组织和参与各种活动。

## 4. 功能需求

### 4.1 用户认证与信任体系

**目标:** 确保用户身份真实性，建立用户信任基础。

*   **用户故事:**
    *   作为一个新用户，我希望能方便快捷地完成注册和登录。
    *   作为一个用户，我希望通过实名认证证明我的身份真实性。
    *   作为一个用户，我希望我的良好行为能体现在我的信用评分上，并获得相应的权益。
    *   作为一个用户，我希望能查看其他用户的认证信息和信用记录，判断其可靠性。
*   **功能列表:**
    *   **FEAT_AUTH_001:** 用户注册 (邮箱/密码，预留微信登录入口)
    *   **FEAT_AUTH_002:** 用户登录 (邮箱/密码，预留微信登录入口)
    *   **FEAT_AUTH_003:** 找回密码
    *   **FEAT_AUTH_004:** 用户实名认证 (通过第三方接口验证身份证信息)
    *   **FEAT_TRUST_001:** 信用评分系统 (MVP后实现，基于行为如活动参与、评价、投诉等动态计算)
    *   **FEAT_TRUST_002:** 认证等级体系 (基础用户 -> 认证用户 -> 金标用户)
    *   **FEAT_TRUST_003:** 用户个人资料页展示认证信息、信用分、活动历史和评价摘要。
    *   **FEAT_TRUST_004:** 其他用户查看某个用户的信任信息。

### 4.2 活动管理系统

**目标:** 提供完整的活动组织、发布、管理和参与流程。

*   **用户故事:**
    *   作为一个活动组织者，我希望能方便地发布不同类型的活动。
    *   作为一个活动组织者，我希望能设置活动的参与条件。
    *   作为一个活动组织者，我能管理活动的报名人员，查看他们的信任信息。
    *   作为一个活动参与者，我能浏览和搜索感兴趣的活动。
    *   作为一个活动参与者，我能查看活动的详细信息。
    *   作为一个活动参与者，我能报名参加活动。
    *   作为一个活动参与者或组织者，我能在活动开始时进行签到。
*   **功能列表:**
    *   **FEAT_ACTIVITY_001:** 活动类型选择 (预设多种常用类型，如聚餐、运动、桌游等)
    *   **FEAT_ACTIVITY_002:** 活动信息填写 (标题、时间、地点、描述、封面图、参与人数上限、费用)
    *   **FEAT_ACTIVITY_003:** 活动参与条件设置 (例如：仅限认证用户、最低信用分要求)
    *   **FEAT_ACTIVITY_004:** 活动发布
    *   **FEAT_ACTIVITY_005:** 活动列表浏览 (展示活动概览信息：标题、时间、地点、组织者、已报名人数)
    *   **FEAT_ACTIVITY_006:** 活动搜索和筛选 (基于关键词、类型、时间、地点)
    *   **FEAT_ACTIVITY_007:** 活动详情页 (展示所有活动信息、组织者信息、已报名参与者列表 - 可控显示信息)
    *   **FEAT_ACTIVITY_008:** 活动报名
    *   **FEAT_ACTIVITY_009:** 报名管理 (组织者查看报名列表、通过/拒绝报名)
    *   **FEAT_ACTIVITY_010:** 活动签到 (通过扫码或手动确认)
    *   **FEAT_ACTIVITY_011:** 活动状态更新 (即将开始、进行中、已结束)

### 4.3 安全保障系统

**目标:** 最大程度保障用户线下活动安全。

*   **用户故事:**
    *   作为一个活动参与者，我希望在活动开始前获得一个动态安全码，用于身份验证。
    *   作为一个用户，我在遇到紧急情况时能快速向紧急联系人求助。
    *   作为一个用户，我在活动期间希望位置信息能被安全追踪，以便紧急时使用。
    *   作为一个用户，我希望平台能识别并预警潜在风险。
*   **功能列表:**
    *   **FEAT_SAFETY_001:** 动态安全码生成 (每个活动生成唯一的动态安全码，随时间更新)
    *   **FEAT_SAFETY_002:** 安全码查看 (组织者和参与者在活动详情页查看安全码)
    *   **FEAT_SAFETY_003:** 紧急求助功能 (一键触发向预设的紧急联系人发送包含位置信息的求助短信/通知)
    *   **FEAT_SAFETY_004:** 紧急联系人设置
    *   **FEAT_SAFETY_005:** 活动期间位置追踪 (需用户授权，仅在活动期间启用，后台记录位置信息)
    *   **FEAT_SAFETY_006:** 风险预警系统 (MVP后实现，基于用户行为、地理位置、历史事件等进行智能风险评估和预警)

### 4.4 社交互动系统

**目标:** 促进用户交流，建立社区。

*   **用户故事:**
    *   作为一个活动组织者或参与者，我希望能就活动进行沟通。
    *   作为一个用户，我希望能在活动结束后对参与者和组织者进行评价。
    *   作为一个用户，我希望能分享活动信息给好友。
*   **功能列表:**
    *   **FEAT_SOCIAL_001:** 活动站内信 (仅限活动参与者和组织者，用于活动相关沟通)
    *   **FEAT_SOCIAL_002:** 活动双向评价 (活动结束后，组织者和参与者可互相评价)
    *   **FEAT_SOCIAL_003:** 活动分享 (生成活动链接或图片，分享到其他平台)
    *   **FEAT_SOCIAL_004:** 关注用户 (MVP后实现)
    *   **FEAT_SOCIAL_005:** 兴趣小组/话题讨论 (MVP后实现)

## 5. 非功能需求

*   **性能:** 应用响应迅速，加载流畅，尤其在活动列表和地图加载时。
*   **安全性:** 用户数据（尤其是身份信息和位置信息）加密存储，传输过程安全。防止恶意攻击和数据泄露。
*   **可用性:** 界面简洁直观，操作流程符合用户习惯，易于上手。
*   **可靠性:** 系统稳定，服务可用性高，异常情况处理得当。
*   **可扩展性:** 架构设计支持未来功能扩展和用户量增长。
*   **兼容性:** 在主流 iOS 和 Android 设备上正常运行。

## 6. 用户流程

### 6.1 新用户引导流程

启动闪屏 → 情感共鸣页面 (展示产品理念) → 价值主张页面 (突出可信安全) → 信任建立页面 (解释信任机制) → 注册/登录页面 → 实名认证页面 (如果未认证) → 进入主页。

### 6.2 活动参与流程

主页浏览活动 → 查看活动列表 → 选择感兴趣的活动 → 查看活动详情 → 评估组织者和参与者信任信息 → 报名参与 → 报名成功页/消息通知 → 查看动态安全码 → 前往活动地点 → 活动签到 → 参与活动 → 活动结束后互相评价。

### 6.3 活动创建流程

主页/发布入口 → 选择活动类型 → 填写活动基础信息 → 设置活动参与条件 → 预览活动详情 → 发布活动 → 查看报名列表 → 管理报名人员 → 活动开始前查看动态安全码 → 活动期间管理 → 活动结束后互相评价。

## 7. 界面需求

本节主要描述MVP阶段的核心页面及其关键元素和交互。

### 7.1 启动闪屏/引导页

*   **描述:** 应用启动时展示品牌标识或引导内容。
*   **元素:** Logo，宣传图/动画，简短文字介绍，可能包含跳过按钮。
*   **交互:** 自动跳转到下一页或点击跳过。

### 7.2 注册/登录页面

*   **描述:** 用户进行账号注册和登录的入口。
*   **元素:**
    *   登录区域：邮箱输入框，密码输入框，登录按钮，忘记密码链接，注册入口。
    *   注册区域：邮箱输入框，密码输入框，确认密码输入框，注册按钮，登录入口。
    *   预留微信登录按钮位置。
*   **交互:**
    *   输入框输入文本。
    *   点击登录/注册按钮触发认证逻辑。
    *   点击链接跳转到相应页面。
    *   输入校验，错误提示。

### 7.3 实名认证页面

*   **描述:** 用户提交身份信息进行实名认证。
*   **元素:**
    *   姓名输入框。
    *   身份证号输入框。
    *   提交按钮。
    *   认证状态展示 (未认证/认证中/已认证/认证失败)。
    *   认证失败原因提示。
*   **交互:**
    *   输入姓名和身份证号。
    *   点击提交按钮触发认证流程。
    *   提交后展示认证状态。

### 7.4 主页 (活动列表页)

*   **描述:** 展示当前可参与的活动列表。
*   **元素:**
    *   顶部导航/Tab (例如：推荐活动、最新活动、我的活动)
    *   搜索框/按钮。
    *   活动列表 (卡片式展示每个活动的关键信息：标题、时间、地点、组织者、已报名人数、封面图)
    *   发布活动入口 (例如：FAB 或导航按钮)
*   **交互:**
    *   下滑加载更多活动。
    *   点击活动卡片进入活动详情页。
    *   点击搜索按钮进入搜索页面。
    *   点击发布活动入口进入活动发布流程。

### 7.5 活动详情页

*   **描述:** 展示单个活动的详细信息。
*   **元素:**
    *   活动封面图/图集。
    *   活动标题。
    *   活动时间。
    *   活动地点 (可能包含地图链接)。
    *   活动描述。
    *   活动费用。
    *   组织者信息 (头像、昵称、认证/信用信息摘要，点击可查看更多)
    *   已报名参与者列表 (头像、昵称，可控显示信息，点击可查看更多)
    *   参与条件说明。
    *   报名按钮 (如果未报名) 或 已报名状态展示。
    *   动态安全码区域 (活动开始后可见)
    *   活动状态标识 (即将开始、进行中、已结束)
    *   分享按钮。
*   **交互:**
    *   滚动查看详细信息。
    *   点击组织者或参与者查看其资料。
    *   点击报名按钮进行报名。
    *   活动开始后，查看动态安全码。
    *   点击分享按钮分享活动。

### 7.6 活动发布页 (多步流程)

*   **描述:** 用户创建并发布活动的流程。
*   **元素:**
    *   多步表单 (例如：基本信息 -> 详细信息 -> 参与条件 -> 预览)
    *   输入框 (标题、描述、地点等)
    *   日期/时间选择器。
    *   图片上传 (封面图)
    *   参与人数上限输入。
    *   费用输入。
    *   参与条件选项 (例如：需要实名认证)
    *   下一步/上一步按钮。
    *   预览按钮。
    *   发布按钮。
*   **交互:**
    *   填写表单信息。
    *   选择日期和时间。
    *   上传图片。
    *   设置参与条件。
    *   点击预览查看活动效果。
    *   点击发布正式发布活动。

### 7.7 报名管理页 (组织者视角)

*   **描述:** 活动组织者管理活动的报名人员。
*   **元素:**
    *   报名列表 (展示报名人员的头像、昵称、认证/信用信息摘要)
    *   通过/拒绝报名按钮 (针对每个报名者)
*   **交互:**
    *   查看报名人员信息。
    *   点击通过/拒绝按钮处理报名。

### 7.8 我的页面

*   **描述:** 用户查看个人资料、参与/组织的活动列表、信用信息等。
*   **元素:**
    *   用户头像、昵称、认证等级、信用分。
    *   菜单列表 (我的活动、我发布的活动、我的评价、紧急联系人设置、设置等)
*   **交互:**
    *   点击菜单项进入相应子页面。

## 8. 数据需求 (初步 Firestore 数据模型)

*   **users (用户集合):**
    *   `uid` (文档ID，Firebase Auth User ID)
    *   `email` (邮箱)
    *   `displayName` (昵称)
    *   `photoUrl` (头像 URL)
    *   `isRealNameVerified` (是否实名认证，boolean)
    *   `realName` (真实姓名，仅内部使用或部分展示)
    *   `idCardNumber` (身份证号，加密存储，仅内部使用)
    *   `creditScore` (信用评分，number, MVP后实现)
    *   `registeredAt` (注册时间，timestamp)
    *   `lastActiveAt` (最后活跃时间，timestamp)
    *   `emergencyContacts` (紧急联系人列表，array of objects: { name, phone })

*   **activities (活动集合):**
    *   `activityId` (文档ID)
    *   `title` (活动标题)
    *   `description` (活动描述)
    *   `type` (活动类型，string/enum)
    *   `startTime` (开始时间，timestamp)
    *   `endTime` (结束时间，timestamp)
    *   `location` (活动地点，string)
    *   `locationGeoPoint` (地点经纬度，geopoint)
    *   `coverImageUrl` (封面图 URL)
    *   `organizerId` (组织者用户ID，reference to users collection)
    *   `maxParticipants` (参与人数上限，number)
    *   `currentParticipantsCount` (当前已报名人数，number)
    *   `cost` (费用，number)
    *   `costDescription` (费用说明，string)
    *   `requirements` (参与条件，array of strings/enum)
    *   `status` (活动状态，string/enum: upcoming, ongoing, ended, cancelled)
    *   `createdAt` (创建时间，timestamp)
    *   `updatedAt` (更新时间，timestamp)

*   **activity_applications (活动报名集合):**
    *   `applicationId` (文档ID)
    *   `activityId` (活动ID，reference to activities collection)
    *   `userId` (报名用户ID，reference to users collection)
    *   `applicationStatus` (报名状态，string/enum: pending, approved, rejected)
    *   `appliedAt` (报名时间，timestamp)
    *   `isCheckedIn` (是否已签到，boolean)
    *   `safetyCode` (动态安全码，string, 仅活动期间相关用户可查看)

*   **ratings (评价集合 - MVP后实现):**
    *   `ratingId` (文档ID)
    *   `activityId` (活动ID)
    *   `raterId` (评价者用户ID)
    *   `ratedUserId` (被评价者用户ID)
    *   `rating` (评分，number, e.g., 1-5)
    *   `comment` (评价内容，string)
    *   `ratedAt` (评价时间，timestamp)

## 9. 版本规划

### 9.1 MVP 阶段 (版本 1.0)

**目标:** 核心功能上线，验证用户认证、基本活动组织/参与和动态安全码的可行性。

*   **功能:**
    *   FEAT_AUTH_001, FEAT_AUTH_002, FEAT_AUTH_003 (邮箱密码注册登录找回)
    *   FEAT_AUTH_004 (实名认证 UI 和基本流程，对接预留)
    *   FEAT_TRUST_002 (基础用户和认证用户等级展示)
    *   FEAT_TRUST_003 (用户个人资料页基础信息展示)
    *   FEAT_ACTIVITY_001, FEAT_ACTIVITY_002, FEAT_ACTIVITY_004, FEAT_ACTIVITY_005, FEAT_ACTIVITY_007, FEAT_ACTIVITY_008 (活动发布、列表、详情、报名核心流程)
    *   FEAT_SAFETY_001, FEAT_SAFETY_002 (动态安全码生成和查看)
    *   FEAT_SAFETY_004 (紧急联系人设置 UI 和数据存储)
    *   FEAT_SOCIAL_003 (活动分享，基础实现)
*   **UI 页面:** 启动页、引导页、注册登录页、实名认证页、主页 (活动列表)、活动详情页、活动发布流程页、我的页面 (基础信息)。
*   **技术要点:** Firebase Authentication 集成，Firestore 数据读写，基础路由和状态管理，第三方实名认证接口预留，安全码生成算法。
*   **开发时间:** 0-3个月 (需根据实际开发进度调整)

### 9.2 版本 1.x 迭代

**目标:** 完善核心功能，提升用户体验和安全性。

*   **功能:**
    *   完善信用评分系统 (FEAT_TRUST_001)
    *   完整的安全保障系统 (FEAT_SAFETY_003, FEAT_SAFETY_005, FEAT_SAFETY_006 - 紧急求助、位置追踪、风险预警)
    *   活动管理功能完善 (FEAT_ACTIVITY_003, FEAT_ACTIVITY_006, FEAT_ACTIVITY_009, FEAT_ACTIVITY_010, FEAT_ACTIVITY_011 - 参与条件、搜索筛选、报名管理、签到、状态更新)
    *   基础社交互动 (FEAT_SOCIAL_001, FEAT_SOCIAL_002 - 活动站内信、双向评价)
    *   集成微信登录 (预留接口实现)
    *   用户体验优化 (界面流畅度、错误提示、加载状态)
*   **技术要点:** Firebase Cloud Functions (用于信用计算、风险预警等)，第三方地图服务集成，消息推送，更复杂的 Firestore 查询和数据模型。

### 9.3 版本 2.0 扩展

**目标:** 规模扩张，引入高级功能和商业模式。

*   **功能:**
    *   智能活动推荐 (FEAT_ACTIVITY_00X - 基于兴趣、信用分、地理位置)
    *   社交功能深化 (FEAT_SOCIAL_004, FEAT_SOCIAL_005 - 关注、兴趣小组/话题)
    *   商业化功能 (增值服务、广告、平台佣金等)
    *   数据分析和用户行为洞察
*   **技术要点:** 机器学习模型集成 (用于推荐和风险评估)，更复杂的状态管理，支付网关集成，数据分析工具。

### 9.4 版本 3.0+ 生态建设

**目标:** 构建开放平台，拓展垂直领域。

*   **功能:** 开放 API、第三方服务集成、特定领域的活动定制、社区治理机制。

## 10. 成功指标

*   **用户指标:** 注册转化率 (>60%)，实名认证率 (>80%)，月活跃用户 (目标 10万+)，用户留存率 (次日>70%，7日>40%，30日>20%)。
*   **业务指标:** 活动发布量 (月均1000+)，活动参与率 (>60%)，活动完成率 (>85%)，用户满意度 (>4.5分)。
*   **安全指标:** 安全事件率 (<0.1%)，投诉处理时效 (<24小时)，用户信任度 (>90%)。
*   **商业指标:** 收入增长、变现用户比例。